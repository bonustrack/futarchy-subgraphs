# Hypothetical Unified Schema

type Aggregator @entity(immutable: false) {
  id: ID! # Contract Address
  name: String!
  description: String!
  metadata: String
  metadataURI: String
  creator: Bytes!
  owner: Bytes!
  editor: Bytes # Nullable: Editor role for delegated operations
  createdAt: BigInt!
  organizations: [Organization!]! @derivedFrom(field: "aggregator")
  metadataProperties: [String!]
}

type Organization @entity(immutable: false) {
  id: ID! # Contract Address
  aggregator: Aggregator # Nullable: Organization can be created before linking to Aggregator
  name: String!
  description: String!
  metadata: String
  metadataURI: String
  owner: Bytes!
  editor: Bytes # Nullable: Editor role for delegated operations
  createdAt: BigInt!
  proposals: [ProposalEntity!]! @derivedFrom(field: "organization")
  metadataProperties: [String!]
}


type ProposalEntity @entity(immutable: false) {
  id: ID! # Metadata Contract Address (Registry ID)

  # Hierarchy (Nullable because a proposal might exist without metadata initially, or vice versa)
  organization: Organization
  owner: Bytes # Owner of the proposal metadata contract
  editor: Bytes # Nullable: Editor role for delegated operations
  
  # The Key Pointer
  proposalAddress: Bytes! # The address of the proposal on the execution chain

  # Metadata
  title: String!
  description: String!
  metadata: String
  metadataURI: String
  
  # Registry Specifics
  displayNameEvent: String!
  displayNameQuestion: String!
  createdAtTimestamp: BigInt!

  # Generic JSON Key Index
  metadataProperties: [String!]
}

# Entities Removed:
# - NormalizedPool
# - TokenInfo
# - PoolLookup
# - UnifiedOneStopShop (Renamed/Replaced by ProposalEntity)
